{% extends "base.html" %}
{% block content %}
  <div class="hero">
    <h1>Your Personalized Investment Recommendations</h1>
    <p>Based on your investment profile, here are our AI-powered recommendations:</p>
  </div>

  <div class="card profile-summary">
    <h3>Your Investment Profile</h3>
    <div class="profile-grid">
      <div class="profile-item">
        <strong>Primary Goal:</strong> 
        <span>{{ custom_goal if custom_goal else goal.replace('_', ' ').title() }}</span>
      </div>
      <div class="profile-item">
        <strong>Risk Tolerance:</strong> 
        <span class="risk-badge risk-{{ risk }}">{{ risk.title() }}</span>
      </div>
      {% if investment_amount %}
      <div class="profile-item">
        <strong>Investment Amount:</strong> 
        <span>${{ "{:,}".format(investment_amount|int) }}</span>
      </div>
      {% endif %}
      {% if time_horizon %}
      <div class="profile-item">
        <strong>Time Horizon:</strong> 
        <span>{{ time_horizon.replace('_', ' ').title() }}</span>
      </div>
      {% endif %}
    </div>
  </div>

  <div class="recommendations-section">
    <h2>Recommended Investments</h2>
    {% if not investment_amount %}
    <div class="card info-card">
      <p><strong>Note:</strong> Dollar amounts are not shown because no investment amount was specified. Enter an investment amount on the goals page to see how much to allocate to each recommendation.</p>
    </div>
    {% endif %}
    <div class="grid">
      {% for p in picks %}
        <div class="card recommendation-card">
          <div class="recommendation-header">
            <h3>{{ p.ticker }}</h3>
            <span class="recommendation-name">{{ p.name }}</span>
          </div>
          
          <div class="recommendation-details">
            <div class="detail-row">
              <span class="detail-label">Risk Level:</span>
              <span class="risk-badge risk-{{ p.risk_level.lower().replace('-', '_') }}">
                {{ p.risk_level }}
              </span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Timeframe:</span>
              <span>{{ p.timeframe }}</span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Suggested Allocation:</span>
              <span class="allocation">{{ p.allocation }}</span>
            </div>
            
            {% if p.dollar_amount > 0 %}
            <div class="detail-row">
              <span class="detail-label">Dollar Amount:</span>
              <span class="dollar-amount">${{ "{:,.0f}".format(p.dollar_amount) }}</span>
            </div>
            {% endif %}
          </div>
          
          <div class="recommendation-explanation">
            <h4>Why This Investment?</h4>
            <p>{{ p.why }}</p>
          </div>
          
          <div class="recommendation-actions">
            <button class="btn btn-secondary" onclick="researchStock('{{ p.ticker }}')">
              Research {{ p.ticker }}
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="card disclaimer">
    <h3>Important Disclaimer</h3>
    <p><strong>This is not financial advice.</strong> These recommendations are generated by AI and should not be considered as personalized financial advice. Always consult with a qualified financial advisor before making investment decisions. Past performance does not guarantee future results.</p>
  </div>

  <div class="action-buttons">
    <a class="btn btn-primary" href="{{ url_for('goals') }}">Try Different Goals</a>
    <a class="btn btn-secondary" href="{{ url_for('index') }}">Back to Home</a>
  </div>

  <script>
    function researchStock(ticker) {
      // Open multiple research sources for the stock
      const sources = [
        `https://seekingalpha.com/symbol/${ticker}`
      ];
      
      sources.forEach(source => {
        window.open(source, '_blank');
      });
    }
  </script>
{% endblock %}
